```dataviewjs
// 唯一标识，用于精准删除当前代码块（必须保留）
const CODE_BLOCK_ID = "card-generator-code-block";

// 1. 预设卡片数据（text作为默认文本，可修改）
const cardData = [
  {
    id: 0,
    defaultHref: "https://example.com",
    imgSrc: "https://bkimg.cdn.bcebos.com/pic/dbb44aed2e738bd4eea32ffaad8b87d6267ff97f?x-bce-process=image/format,f_auto/quality,Q_70/resize,m_lfit,limit_1,w_536",
    text: "CSDN"
  },
  {
    id: 1,
    defaultHref: "https://example.com/tencent",
    imgSrc: "https://cloudcache.tencent-cloud.com/qcloud/portal/kit/images/slice/logo.23996906.svg",
    text: "腾讯云"
  },
  {
    id: 2,
    defaultHref: "https://example.com/feiniu",
    imgSrc: "https://static2.fnnas.com/official/fnos-logo.png",
    text: "飞牛云"
  },
  {
    id: 3,
    defaultHref: "https://example.com/feiniu2",
    imgSrc: "https://pica.zhimg.com/v2-4cd83ae3d6ca76dabecf001244a62310.jpg?source=57bbeac9",
    text: "知乎"
  },
  {
    id: 4,
    defaultHref: "https://example.com/feiniu3",
    imgSrc: "https://i0.hdslb.com/bfs/activity-plat/cover/20170614/x65z8xpm2z.png",
    text: "B站"
  }
  
  //https://i1.hdslb.com/bfs/archive/ac7edcb6a0cd83bc3a7a7a0a3730ba69c17f47ab.png
];

// 2. 获取当前页面
const currentFile = app.workspace.getActiveFile();
if (!currentFile) {
  dv.el("div", "❌ 无法获取当前文件", { style: "color: red" });
  return;
}
const pageId = currentFile.name;

// 3. 检查临时保存的卡片
const savedCard = localStorage.getItem(`card_${pageId}`);
if (savedCard) {
  dv.el("div", savedCard, { id: "mainContainer" });
} else {
  createInteractiveCard();
}

// 4. 创建交互式选择器（水平排列）
function createInteractiveCard() {
  const mainContainer = dv.el("div", "", { id: "mainContainer" });
  const interactiveContainer = document.createElement("div");
  interactiveContainer.id = "interactiveContainer";
  // 核心：水平排列 + 自动换行（避免溢出）
  interactiveContainer.style.cssText = `
    display: flex; 
    align-items: center; 
    gap: 8px; 
    flex-wrap: wrap; 
    padding: 10px 0;
  `;

  // 下拉选择器
  const selector = document.createElement("select");
  selector.style.cssText = "padding: 5px; min-width: 120px;";
  const defaultOption = document.createElement("option");
  defaultOption.value = "";
  defaultOption.textContent = "选择样式";
  defaultOption.selected = true;
  selector.appendChild(defaultOption);
  cardData.forEach(card => {
    const option = document.createElement("option");
    option.value = card.id;
    option.textContent = card.text;
    selector.appendChild(option);
  });

  // URL输入框
  const urlInput = document.createElement("input");
  urlInput.type = "text";
  urlInput.placeholder = "链接";
  urlInput.style.cssText = "width: 180px; padding: 5px;";

  // 卡片文本输入框
  const textInput = document.createElement("input");
  textInput.type = "text";
  textInput.placeholder = "显示文字";
  textInput.style.cssText = "width: 120px; padding: 5px;";

  // 提交按钮
  const submitBtn = document.createElement("button");
  submitBtn.textContent = "生成";
  submitBtn.style.cssText = "padding: 5px 12px; cursor: pointer;";

  // 组装交互元素（水平排列）
  interactiveContainer.appendChild(selector);
  interactiveContainer.appendChild(urlInput);
  interactiveContainer.appendChild(textInput);
  interactiveContainer.appendChild(submitBtn);
  mainContainer.appendChild(interactiveContainer);

  // 选择时填充默认值
  selector.addEventListener("change", (e) => {
    const selectedId = e.target.value;
    if (selectedId !== "") {
      const selectedCard = cardData.find(card => card.id === parseInt(selectedId));
      urlInput.value = selectedCard?.defaultHref || "";
      textInput.value = selectedCard?.text || "";
    } else {
      urlInput.value = "";
      textInput.value = "";
    }
  });

  // 提交生成卡片
  submitBtn.addEventListener("click", () => {
    const selectedId = selector.value;
    const customHref = urlInput.value.trim();
    const customText = textInput.value.trim();

    if (!selectedId) { alert("请选择样式"); return; }
    if (!customHref) { alert("请输入链接"); return; }
    if (!customText) { alert("请输入显示文字"); return; }

    const selectedCard = cardData.find(card => card.id === parseInt(selectedId));
    const cardHtml = generateCardHtml(selectedCard, customHref, customText);
    modifyNoteContent(cardHtml);
  });

  // 回车键提交
  [urlInput, textInput].forEach(el => {
    el.addEventListener("keypress", (e) => {
      if (e.key === "Enter") submitBtn.click();
    });
  });
}

// 生成卡片HTML
function generateCardHtml(selectedCard, customHref, customText) {
  return `<div>
  <a href="${customHref}" target="_blank" style="
      display: inline-flex; 
      align-items: center;
      width: 300px; 
      border: 1px solid #eee; 
      padding: 10px; 
      text-decoration: none; 
      color: #333; 
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      margin: 5px 0;
    ">
      <img src="${selectedCard.imgSrc}" style="
        width: auto; 
        height: 36px; 
        max-height: 36px; 
        max-width: 72px; 
        object-fit: contain;
      ">
      <p style="
        margin: 0 0 0 8px; 
        font-weight: 500;
        flex: 1;
      ">${customText}</p>
</a>
</div>`;
}

// 修改笔记内容
async function modifyNoteContent(cardHtml) {
  try {
    const fileContent = await app.vault.read(currentFile);
    const codeBlockRegex = new RegExp(
      `\`\`\`dataviewjs.*?${CODE_BLOCK_ID}.*?\n[\\s\\S]*?\`\`\``,
      'g'
    );
    const cleanedContent = fileContent.replace(codeBlockRegex, '').trim();
    const tag = "\n#卡片链接";
    const finalContent = `${cleanedContent}\n${tag}\n${cardHtml}\n`;
    await app.vault.modify(currentFile, finalContent);
    new Notice("✅ 卡片生成成功");
  } catch (err) {
    console.error("修改失败:", err);
    new Notice("❌ 生成失败，请重试");
  }
}
```
