### 近一周
```dataviewjs
// 设置时间范围为过去一周
const weekAgo = new Date();
weekAgo.setDate(weekAgo.getDate() - 7); // 获取7天前的日期

// --- 定义要排除的文件夹 ---
const excludedFolders = [
    "笔记/",
    "images/",
    "附件/"
];

// 使用 Dataview API 查询过去一周创建的所有笔记，并按创建时间排序
const pages = dv.pages()
  .where(p => 
      p.file.ctime >= weekAgo && 
      // 确保笔记的路径不在排除列表中（使用 startsWith 更精确）
      !excludedFolders.some(folder => p.file.path.startsWith(folder))
  )
  .sort(p => p.file.ctime);

// 如果没有找到笔记，给出提示
if (pages.length === 0) {
  dv.paragraph("过去一周没有创建任何笔记。");
} else {
  // 初始化一个对象，用于按天存储笔记数量
  const dailyCounts = {};
  const days = [];
  
  // 生成过去7天的所有日期（格式：yyyy-MM-dd），并初始化计数为0
  for (let i = 6; i >= 0; i--) { // 从6天前到今天，共7天
    const currentDay = new Date();
    currentDay.setDate(currentDay.getDate() - i);
    const dateStr = currentDay.toISOString().split('T')[0]; // 转换为 yyyy-MM-dd 格式
    days.push(dateStr);
    dailyCounts[dateStr] = 0;
  }

  // 遍历查询到的笔记，按天统计数量
  pages.forEach(page => {
    let ctime = page.file.ctime;
    
    // 确保 ctime 是一个有效的 Date 对象
    if (!(ctime instanceof Date)) {
      ctime = new Date(ctime);
      if (isNaN(ctime.getTime())) {
        console.warn(`Skipping page "${page.file.name}" because its ctime is not a valid date.`);
        return;
      }
    }
    
    // 将 ctime 转换为 yyyy-MM-dd 格式，用于匹配统计键
    const dateStr = ctime.toISOString().split('T')[0];
    if (dailyCounts[dateStr] !== undefined) {
      dailyCounts[dateStr]++;
    }
  });

  // 准备图表的数据（按时间顺序排列）
  const labels = days; // 直接使用生成的有序日期数组
  const data = labels.map(label => dailyCounts[label]);

  // 渲染柱状图
  
  // 使用 window.renderChart() 渲染柱状图
  window.renderChart({
    type: 'bar', // 图表类型改为柱状图
    data: {
      labels: labels,
      datasets: [{
        label: '笔记数量',
        data: data,
        backgroundColor: 'rgba(75, 192, 192, 0.6)', // 柱状图填充色
        borderColor: 'rgb(75, 192, 192)', // 柱状图边框色
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        tooltip: { mode: 'index', intersect: false }
      },
      scales: {
        x: {
          title: { display: true, text: '日期' },
          ticks: { 
            autoSkip: false, // 不自动跳过日期（一周只有7天，全部显示）
            maxRotation: 45, 
            minRotation: 45 
          }
        },
        y: {
          title: { display: true, text: '创建笔记数' },
          beginAtZero: true,
          ticks: { precision: 0 } // Y轴只显示整数
        }
      }
    }
  }, this.container);
}
```
### 近1年
```dataviewjs
// 设置时间范围为过去一年
const yearAgo = new Date();
yearAgo.setFullYear(yearAgo.getFullYear() - 1);

// --- 定义要排除的文件夹 ---
// 注意：路径是相对于 vault 根目录的，使用正斜杠 '/'
// 例如，要排除 "01. 模板" 文件夹，就写 "01. 模板/"
const excludedFolders = [
    "笔记/",
    "images/",
    "附件/"
];

// 使用 Dataview API 查询过去一年创建的所有笔记，并按创建时间排序
// 增加了排除文件夹的过滤条件
const pages = dv.pages()
  .where(p => 
      p.file.ctime >= yearAgo && 
      // 确保笔记的路径不在排除列表中
      !excludedFolders.some(folder => p.file.path.startsWith(folder))
  )
  .sort(p => p.file.ctime);

// 如果没有找到笔记，给出提示
if (pages.length === 0) {
  dv.paragraph("过去一年没有创建任何笔记。");
} else {
  // 初始化一个对象，用于按月份存储笔记数量
  const monthlyCounts = {};
  
  // 初始化过去12个月的所有月份，确保即使某个月没有笔记也会在图表上显示为0
  const months = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
  const currentDate = new Date();
  
  for (let i = 11; i >= 0; i--) {
    const monthDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - i);
    const yearMonth = monthDate.getFullYear() + "-" + months[monthDate.getMonth()];
    monthlyCounts[yearMonth] = 0;
  }

  // 遍历查询到的笔记，按月份统计数量
  pages.forEach(page => {
    let ctime = page.file.ctime;

	  ctime=new Date(ctime)

	  const year = ctime.getFullYear();
	  const month = (ctime.getMonth() + 1).toString().padStart(2, '0'); // 月份从 0 开始，所以 +1
	  const day = ctime.getDate().toString().padStart(2, '0');
    
    // 确保 ctime 是一个有效的 Date 对象
	console.log(`"${page.file.name}"-${year}${month}${day} `)
	
    if (!(ctime instanceof Date)) {
      ctime = new Date(ctime);
      if (isNaN(ctime.getTime())) {
        console.warn(`Skipping page "${page.file.name}" because its ctime is not a valid date.`);
        return;
      }
    }

    const yearMonth = ctime.getFullYear() + "-" + months[ctime.getMonth()];
    if (monthlyCounts[yearMonth] !== undefined) {
      monthlyCounts[yearMonth]++;
    }
  });

  // 准备图表的数据
  const labels = Object.keys(monthlyCounts).sort();
  const data = labels.map(label => monthlyCounts[label]);

  // 渲染折线图
  
  
  // 使用 window.renderChart() 替代 dv.chart()
  window.renderChart({
    type: 'line',
    data: {
      labels: labels,
      datasets: [{
        label: '笔记数量',
        data: data,
        fill: true,
        borderColor: 'rgb(255, 92, 92)',
        tension: 0.3,
        pointBackgroundColor: 'rgb(75, 192, 92)',
        pointRadius: 4
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        tooltip: { mode: 'index', intersect: false }
      },
      scales: {
        x: {
          title: { display: true, text: '月份' },
          ticks: { autoSkip: true, maxRotation: 45, minRotation: 45 }
        },
        y: {
          title: { display: true, text: '创建笔记数' },
          beginAtZero: true,
          ticks: { precision: 0 }
        }
      }
    }
  }, this.container); // 注意这里需要传入 this.container
}
```

